

{% extends "dashboard/base.html" %}

{% load static %}

{% block head %}   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

    <link rel="stylesheet" type="text/css" href="{% static '/style.css' %}">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

{% endblock head %}

{% block content %} 

<div class="container">  
  <h2>Listado de Clientes</h2>
  <p>Añade, actualiza y elimina Clientes:</p> 
  <a href="{% url 'client_create' %}" class="btn btn-outline-primary mb-3" role="button" aria-pressed="true">Añadir Cliente</a>
  
  <table class="table table-striped">
    <thead>      
          <tr>    
            <th>Nombre</th>
            <th>Correo</th>
            <th>Telefono</th>             
            <th>Opciones</th>
        </tr>
    </thead>

    <tbody>
        {% for object in object_list %}     
            <tr>                
                <td>{{ object.name }}</td>
                <td>{{ object.email }}</td>
                <td>{{ object.phone }}</td>
                <td>               
                  {% comment %} <a class="btn btn-primary" href="{% url 'client_detail' object.id %}">Editar</a> {% endcomment %}
                  <a class="btn btn-danger" onclick="confirmDelete({{ object.id }})">Eliminar</a>
                </td>            
            </tr>
        {% endfor %}
    </tbody>
  </table>


</div>

<script>
  function confirmDelete(object_id) {
      Swal.fire({
      title: 'Are you sure?',
      text: "You won't be able to revert this!",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Yes, delete it!'
    }).then((result) => {
      if (result.isConfirmed) {
        {% comment %} Swal.fire(
          'Deleted!',
          'Your file has been deleted.',
          'success'
        ) {% endcomment %}

        window.location.href= window.location.pathname + "delete/"+ object_id;
    
      }
    })
    }
</script>

{% endblock content %} 