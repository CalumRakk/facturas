

{% extends "dashboard/base.html" %}


{% block content %} 

<div class="container">
  <h2>Listado Productos</h2>
  <br>
  <p>AÃ±ade, actualiza y elimina Productos:</p>            
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Name</th>
        <th>Precio</th>
        <th>Fabricante</th>
        <th>Opciones</th>
      </tr>
    </thead>
    <tbody>
        {% for product in products %}     
            <tr>
                <td>{{product.name }}</td>
                <td>{{product.price }}</td>
                <td>{{product.maker }}</td>
                <td>
                  <a class="btn btn-primary" href="{% url 'product_detail' product.id %}">Editar</a>
                  <a class="btn btn-danger" onclick="confirmDelete({{ product.id }})">Eliminar</a>
                </td>            
            </tr>
        {% endfor %}
    </tbody>
  </table>
</div>

<script>
  function confirmDelete(product_id) {
      Swal.fire({
      title: 'Are you sure?',
      text: "You won't be able to revert this!",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Yes, delete it!'
    }).then((result) => {
      if (result.isConfirmed) {
        {% comment %} Swal.fire(
          'Deleted!',
          'Your file has been deleted.',
          'success'
        ) {% endcomment %}

         window.location.href="/products/delete/"+ product_id;

      }
    })
    }
</script>

{% endblock content %} 